<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="/plugins/waterfall/waterfall.css">
  </head>
  <body>
    <h1>Infinite Scroll - Masonry image grid</h1>
    <div class="grid are-images-unloaded">
      <div class="grid__col-sizer"></div>
      <div class="grid__gutter-sizer"></div>
      <div class="grid__item grid__item--height3"></div>
      <div class="grid__item grid__item--height1"></div>
      <div class="grid__item grid__item--height2"></div>

      <div class="grid__item grid__item--height1"></div>
      <div class="grid__item grid__item--height3"></div>
      <div class="grid__item grid__item--height1"></div>
      <div class="grid__item grid__item--height3"></div>
      <div class="grid__item grid__item--height1"></div>
      <div class="grid__item grid__item--height1"></div>
      <div class="grid__item grid__item--height2"></div>
      <div class="grid__item grid__item--height2"></div>
      <div class="grid__item grid__item--height3"></div>
      <div class="grid__item grid__item--height1"></div>
      <div class="grid__item grid__item--height2"></div>
    </div>

    <div class="page-load-status">
      <div class="loader-ellips infinite-scroll-request">
        <span class="loader-ellips__dot"></span>
        <span class="loader-ellips__dot"></span>
        <span class="loader-ellips__dot"></span>
        <span class="loader-ellips__dot"></span>
      </div>
      <p class="infinite-scroll-last">End of content</p>
      <p class="infinite-scroll-error">No more pages to load</p>
    </div>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/base/js/infinite-scroll.pkgd.min.js"></script>
    <script src="/base/js/masonry.pkgd.min.js"></script>
    <script>
      var grid = document.querySelector('.grid');

      var msnry = new Masonry(grid, {
        itemSelector: 'none', // select none at first
        columnWidth: '.grid__col-sizer',
        gutter: '.grid__gutter-sizer',
        percentPosition: true,
        stagger: 30,
        // nicer reveal transition
        visibleStyle: {
          transform: 'translateY(0)',
          opacity: 1
        },
        hiddenStyle: {
          transform: 'translateY(100px)',
          opacity: 0
        }
      });

      imagesLoaded(grid, function () {
        // reveal items
        grid.classList.remove('are-images-unloaded');
        msnry.options.itemSelector = '.grid__item';
        var items = grid.querySelectorAll('.grid__item');
        msnry.appended(items);
      });
    </script>
  </body>
</html>